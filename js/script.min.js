function setCurrentNumbers(){var n,e=String(parseInt(price/month)).slice(-3),t=String(parseInt(price/month)).slice(0,-3),i=t+" "+e,o=parseInt(month);1===o?n="":o>1&&4>month?n="а":o>4&&(n="ей"),$(".calc_summ span").text(i),$(".calc_month b").text(month),$(".calc_month span").text(n)}function showProducts(){function r(e){var t=e+1;for(e;e>=0;e--)$(n[e]).fadeIn();for(t;t<n.length;t++)$(n[t]).fadeOut()}var e=parseInt(price),t=parseInt(max_price),i=parseInt(min_price),o=t-i,n=[".product_img_2",".product_img_3",".product_img_4",".product_img_5"],s=o/8;r(e>8*s?3:e>6*s?2:e>4*s?1:e>2*s?0:-1)}function modalOpen(e){e.preventDefault();var t=e.target;for(console.log(t);!t.hasAttribute("data-modal-id");)t=t.parentElement;var i=t.getAttribute("data-modal-id");if($("#"+i).length>0){$("#"+i).addClass("modal_visible"),$("#"+i).fadeIn("slow"),"modal_photo"!==i&&$("#"+i).find(".wrapper").customScrollbar(),$("#"+i).find(".viewport").innerHeight()/$("#"+i).find(".overview").innerHeight()>874/977&&$("#"+i).find(".scroll-bar").css("display","none");var o=document.body.offsetWidth;window_offset=window.pageYOffset,document.body.style.marginRight=window.innerWidth-o+"px",document.body.style.width=o+"px",document.body.style.top="-"+window_offset+"px",$("header").addClass("hide"),document.body.classList.add("hidden")}}function modalClose(e){var t=e.target;for(console.log(t);!t.classList.contains("modal");)t=t.parentElement;$("#"+t.id).removeClass("modal_visible"),$("#"+t.id).fadeOut("slow",modalAfterTransition)}function modalAfterTransition(){document.body.style.marginRight=0,document.body.style.width="initial",$("header").removeClass("hide"),document.body.classList.remove("hidden"),window.scrollTo(0,window_offset)}function initMap(){google_map=new google.maps.Map(document.getElementById("google_map"),{center:{lat:51.167681,lng:71.447188},zoom:15,disableDefaultUI:!0});var e="images/icon_marker.png",i=(new google.maps.Marker({position:{lat:51.16623,lng:71.437161},map:google_map,icon:e}),[{featureType:"all",stylers:[{hue:"#00d4ff"},{saturation:-800},{lightness:50},{gamma:1}]}]);google_map.setOptions({styles:i})}function checkLocation(){var e=$(location).attr("href");if(-1!=e.indexOf("#")){var t=e.indexOf("#");if(-1!=e.indexOf("?"))var i=e.indexOf("?");var o=e.slice(t,i||e.length);switch(o){case"#modal_1":$('[data-modal-id="modal_1"]').trigger("click");break;case"#modal_2":$('[data-modal-id="modal_2"]').trigger("click");break;case"#modal_3":$('[data-modal-id="modal_3"]').trigger("click");break;case"#modal_4":$('[data-modal-id="modal_4"]').trigger("click")}}}$(".bg_img").each(function(){$(this).css("background-image","url("+$(this).find("img").attr("src")+")")}),$(".part_3_grid .cell").on("mouseenter",function(){$(this).find(".hover").animate({opacity:1},400)}),$(".part_3_grid .cell").on("mouseleave",function(){$(this).find(".hover").animate({opacity:0},0)}),$(".part_5_right").on("mouseenter",function(){var e=$(this).find("img");e.attr("src",e.attr("data-img-2"))}),$(".part_5_right").on("mouseleave",function(){var e=$(this).find("img");e.attr("src",e.attr("data-img-1"))}),$(".form_range.price").slider({animate:"fast",max:1e5,min:1e4,value:55e3,step:1e3});var price=$(".form_range.price").slider("value");$(".form_range.month").slider({animate:"fast",max:4,min:1,value:3,step:1});var month=$(".form_range.month").slider("value");$(".form_range.price").slider({change:function(e,t){price=$(".form_range.price").slider("value"),console.log($(".form_range.price").slider("value")),$('[name="client_summ"]').val(price),setCurrentNumbers(),showProducts()}}),$(".form_range.month").slider({change:function(e,t){month=$(".form_range.month").slider("value"),console.log($(".form_range.month").slider("value")),$('[name="client_monthes"]').val(month),setCurrentNumbers(),showProducts()}});var max_price=$(".form_range.price").slider("option","max"),min_price=$(".form_range.price").slider("option","min");setCurrentNumbers(),showProducts(),$(".part_7_tabs").tabs({active:0,heightStyle:"auto",hide:{effect:"fade",duration:400},show:{effect:"fade",duration:400}}),$(".part_8 .slider").slick({dots:!0,infinite:!1,speed:300,slidesToShow:1,adaptiveHeight:!0}),$(".part_8_button").on("click",function(){var e=$(this).parent().parent().find(".popup");e.fadeToggle("slow"),e.find(".popup_wrapper").addClass("default-skin").customScrollbar()}),$(".popup .close").on("click",function(){var e=$(this).parent();e.fadeOut("slow")}),$(".input_phone").mask("+7 (999) 999 9999"),$(".input_phone, .input_name").parent().append('<div class="validator_message" />'),$(".input_phone").attr("data-validation","length"),$(".input_phone").attr("data-validation-length","17"),$(".input_name").attr("data-validation","custom"),$(".input_name").attr("data-validation-regexp","^[a-zA-ZА-Яа-яЁё ]{4,}$"),$(".input_phone").addClass("form-control"),$.validate({addValidClassOnAll:!0,scrollToTopOnError:!1}),$(".field_name .validator_message").text("Введите имя (более 3-х букв; допускаются русские и латинские символы, пробелы)"),$(".field_phone .validator_message").text("Введите номер телефона (только цифры)"),$(".modal_window").each(function(){!$(this).find(".container, .modal_image").length>0&&$(this).find(".wrapper").prepend('<div class="modal_close_block" />')}),$(".modal_window").on("click",function(e){console.log(e.target),(e.target.classList.contains("modal_content")||e.target.classList.contains("close")||e.target.classList.contains("modal_wrapper")||e.target.classList.contains("modal_close_block"))&&modalClose(e)}),$(window).on("resize",function(){$("header").css("width",$("body").width())}),$("header").css("width",$("body").width());var window_offset,modal_window;$("[data-modal-id], [data-modal-id] *").on("click",function(e){modalOpen(e)});var gallery_index=0;$('[data-modal-id="modal_photo"]').on("click",function(e){var t=$(this).parent().attr("data-img-url");gallery_index=$(this).parent().attr("data-gal"),$("#modal_photo").find(".modal_image").attr("src",t)}),$("#modal_photo .next").on("click",function(e){gallery_index++,gallery_index>=$("[data-gal]").length&&(gallery_index=1);var t=$('[data-gal="'+gallery_index+'"]').attr("data-img-url");$("#modal_photo").find(".modal_image").attr("src",t)}),$("#modal_photo .prev").on("click",function(e){gallery_index--,0===gallery_index&&(gallery_index=$("[data-gal]").length);var t=$('[data-gal="'+gallery_index+'"]').attr("data-img-url");$("#modal_photo").find(".modal_image").attr("src",t)});var google_map;$(".button, .part_1_button, .part_5_button, .part_8_button").on("mousedown",function(){$(this).css("transform","translate(1px, 2px)")}),$(".button,.part_1_button, .part_5_button, .part_8_button").on("mouseup",function(){$(this).css("transform","translate(0px, 0px)")}),$(".button, .part_1_button, .part_8_button").prepend('<div class="button_hover" />'),$(".button, .part_1_button, .part_8_button").on("mouseenter",function(){$(this).find(".button_hover").animate({opacity:1})}),$(".button, .part_1_button, .part_8_button").on("mouseleave",function(){$(this).find(".button_hover").animate({opacity:0})}),checkLocation();